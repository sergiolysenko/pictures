{"version":3,"sources":["webpack:///../node_modules/dayjs/dayjs.min.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/publicPath","webpack:///./img/logo-pictures.png","webpack:///./img/picture-1.jpg","webpack:///./img/picture-2.jpg","webpack:///./img/picture-3.jpg","webpack:///./view/abstract.js","webpack:///./utils/render.js","webpack:///./view/smart.js","webpack:///./view/new-picture.js","webpack:///./const.js","webpack:///./presenter/new-picture.js","webpack:///./view/show-comments.js","webpack:///./view/comments-container.js","webpack:///./view/picture.js","webpack:///./view/social-block.js","webpack:///./view/comments.js","webpack:///./view/no-comments.js","webpack:///./view/show-more-comments.js","webpack:///./mock/utils.js","webpack:///./mock/comment.js","webpack:///./view/comment.js","webpack:///./presenter/comments.js","webpack:///./utils/observer.js","webpack:///./model/comments.js","webpack:///./presenter/picture.js","webpack:///./presenter/board.js","webpack:///./mock/picture.js","webpack:///./model/pictures.js","webpack:///./model/user.js","webpack:///./view/site-header.js","webpack:///./main.js","webpack:///./mock/user.js"],"names":["module","exports","t","e","n","r","i","s","u","a","o","f","h","c","d","name","weekdays","split","months","$","String","length","Array","join","l","z","utcOffset","Math","abs","floor","m","date","year","month","clone","add","ceil","p","M","y","w","D","ms","Q","toLowerCase","replace","S","v","args","arguments","g","locale","$L","utc","$u","x","$x","$offset","this","parse","prototype","$d","Date","NaN","test","match","substring","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","unix","valueOf","getTime","toDate","apply","slice","$locale","weekStart","$set","min","daysInMonth","get","Number","round","subtract","format","substr","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","A","mm","ss","SSS","Z","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","forEach","extend","$i","isDayjs","en","Ls","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call","getter","__esModule","definition","key","Object","defineProperty","enumerable","globalThis","Function","window","obj","prop","hasOwnProperty","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","Error","AbstractView","_element","_callback","createElement","getTemplate","template","newElement","innerHTML","firstChild","RenderPosition","render","container","child","place","getElement","prepend","append","remove","component","removeElement","Smart","_data","update","justDataUpdate","assign","updateElement","prevElement","parent","parentElement","replaceChild","restoreHandlers","BLANK_PICTURE","id","title","author","likes","NewPictureView","_submitHandler","bind","_cancelClickHandler","_descriptionInputHandler","_loadImgHandler","_setInnerHandlers","setSubmitHandler","submit","setCancelClickHandler","cancelClick","querySelector","addEventListener","evt","preventDefault","updateData","target","value","file","files","reader","FileReader","result","readAsDataURL","callback","UpdateType","UserAction","MenuItem","NewPicturePresenter","picturesContainer","changeData","_picturesContainer","_changeData","_newPictureComponent","_handleFormSubmit","_handleCancelClick","cancelCallback","_cancelCallback","destroy","picture","CommentsButtonView","isCommentsOpen","_commentsButtonHandler","setCommentsButtonHandler","commentsClick","CommentsContainerView","PictureView","_picture","SocialBlockView","_likeClickHandler","_favoriteClickHandler","isFavorite","isLiked","setLikeClickHandler","likeClick","setFavoriteClickHandler","favoriteClick","sign","checked","BLANK_COMMENT","avatar","text","time","likeCount","CommentsSectionView","_imputCommentHandler","NoCommentsView","ShowMoreCommentsView","_clickHandler","click","getRandomNumber","b","lower","upper","max","random","avatars","authors","comments","generateComment","allComments","pictureId","fill","map","item","CommentView","comment","isLikesShowing","dayjs","CommentsSectionPresenter","commentsSectionContainer","commentsModel","userModel","_commentsSectionContainer","_commentsModel","_userModel","_renderedCommentsCount","_commentComponent","_noCommentsComponent","_commentsSectionComponent","_showMoreCommentsComponent","_handleShowMoreCommentsClick","_handleCommentsViewAction","_handleCommentsModelEvent","addObserver","user","liked","some","adaptedPicture","_loadPictureComments","values","removeObserver","currentPicture","console","log","_setPictureComments","currentPictureComments","setComments","actionType","updateType","updateComment","addUserDataToComment","getUser","addComment","data","_picturePresenter","_cleanComments","_renderCommentsSection","commentsCount","_comments","newRenderedCommentsCount","_renderComments","commentComponent","commentsList","_renderComment","showMorebuttonContainer","parentNode","setClickHandler","getComments","_renderNoComments","_renderShowMoreCommentsButton","Observer","_observers","observer","push","filter","existedObserver","event","payload","CommentsModel","_notify","index","findIndex","PicturePresenter","changeMode","changePicture","_changeMode","_changePicture","_isCommentsOpen","_commentsButtonComponent","_pictureComponent","_socialBlockComponent","_socialBlockContainer","_commentsContainer","_handleCommentsClick","_handleLikeClick","_handleFavoriteClick","_commentsContainerComponent","_clearCommentsSection","_commentsSectionPresenter","commentsContainer","BoardPresenter","boardContainer","pictureModel","_boardContainer","_pictureModel","_handleModeChange","_handleViewAction","_handleModelEvent","_newPicturePresenter","pictures","favorites","newPicture","_renderBoard","presenter","resetView","picturePresenter","_renderPicture","getPictures","boardPictures","parseUserPicturesToBoardData","_renderPictures","updatePicture","parseBoardDataToServerPictures","updateFavorites","updateLiked","currentUser","adaptNewPictureToBoard","loadPicture","_clearBoard","picturesSrcs","picturesTitles","PicturesModel","_pictures","UserModel","_user","userItemsID","newItemID","_update","SiteHeaderView","_userClickHandler","_loadPictureClickHandler","menu","hidden","disabled","loadPictureClick","concat","picturesModel","setPictures","siteHeaderView","handleNewTaskClose","headerContainer","picturesListContainer","setLoadPictureClickHandler","menuItem","boardPresenter","createPicture"],"mappings":"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","file":"bundle.js","sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.dayjs=e()}(this,function(){\"use strict\";var t=\"millisecond\",e=\"second\",n=\"minute\",r=\"hour\",i=\"day\",s=\"week\",u=\"month\",a=\"quarter\",o=\"year\",f=\"date\",h=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,c=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},$=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},l={s:$,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+$(r,2,\"0\")+\":\"+$(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,u),s=n-i<0,a=e.clone().add(r+(s?-1:1),u);return+(-(r+(n-i)/(s?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:o,w:s,d:i,D:f,h:r,m:n,s:e,ms:t,Q:a}[h]||String(h||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},y=\"en\",M={};M[y]=d;var m=function(t){return t instanceof S},D=function(t,e,n){var r;if(!t)return y;if(\"string\"==typeof t)M[t]&&(r=t),e&&(M[t]=e,r=t);else{var i=t.name;M[i]=t,r=i}return!n&&r&&(y=r),r||!n&&y},v=function(t,e){if(m(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new S(n)},g=l;g.l=D,g.i=m,g.w=function(t,e){return v(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function d(t){this.$L=D(t.locale,null,!0),this.parse(t)}var $=d.prototype;return $.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(g.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(h);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},$.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},$.$utils=function(){return g},$.isValid=function(){return!(\"Invalid Date\"===this.$d.toString())},$.isSame=function(t,e){var n=v(t);return this.startOf(e)<=n&&n<=this.endOf(e)},$.isAfter=function(t,e){return v(t)<this.startOf(e)},$.isBefore=function(t,e){return this.endOf(e)<v(t)},$.$g=function(t,e,n){return g.u(t)?this[e]:this.set(n,t)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(t,a){var h=this,c=!!g.u(a)||a,d=g.p(t),$=function(t,e){var n=g.w(h.$u?Date.UTC(h.$y,e,t):new Date(h.$y,e,t),h);return c?n:n.endOf(i)},l=function(t,e){return g.w(h.toDate()[t].apply(h.toDate(\"s\"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),h)},y=this.$W,M=this.$M,m=this.$D,D=\"set\"+(this.$u?\"UTC\":\"\");switch(d){case o:return c?$(1,0):$(31,11);case u:return c?$(1,M):$(0,M+1);case s:var v=this.$locale().weekStart||0,S=(y<v?y+7:y)-v;return $(c?m-S:m+(6-S),M);case i:case f:return l(D+\"Hours\",0);case r:return l(D+\"Minutes\",1);case n:return l(D+\"Seconds\",2);case e:return l(D+\"Milliseconds\",3);default:return this.clone()}},$.endOf=function(t){return this.startOf(t,!1)},$.$set=function(s,a){var h,c=g.p(s),d=\"set\"+(this.$u?\"UTC\":\"\"),$=(h={},h[i]=d+\"Date\",h[f]=d+\"Date\",h[u]=d+\"Month\",h[o]=d+\"FullYear\",h[r]=d+\"Hours\",h[n]=d+\"Minutes\",h[e]=d+\"Seconds\",h[t]=d+\"Milliseconds\",h)[c],l=c===i?this.$D+(a-this.$W):a;if(c===u||c===o){var y=this.clone().set(f,1);y.$d[$](l),y.init(),this.$d=y.set(f,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},$.set=function(t,e){return this.clone().$set(t,e)},$.get=function(t){return this[g.p(t)]()},$.add=function(t,a){var f,h=this;t=Number(t);var c=g.p(a),d=function(e){var n=v(h);return g.w(n.date(n.date()+Math.round(e*t)),h)};if(c===u)return this.set(u,this.$M+t);if(c===o)return this.set(o,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(f={},f[n]=6e4,f[r]=36e5,f[e]=1e3,f)[c]||1,l=this.$d.getTime()+t*$;return g.w(l,this)},$.subtract=function(t,e){return this.add(-1*t,e)},$.format=function(t){var e=this;if(!this.isValid())return\"Invalid Date\";var n=t||\"YYYY-MM-DDTHH:mm:ssZ\",r=g.z(this),i=this.$locale(),s=this.$H,u=this.$m,a=this.$M,o=i.weekdays,f=i.months,h=function(t,r,i,s){return t&&(t[r]||t(e,n))||i[r].substr(0,s)},d=function(t){return g.s(s%12||12,t,\"0\")},$=i.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:g.s(a+1,2,\"0\"),MMM:h(i.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:g.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,o,2),ddd:h(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:g.s(s,2,\"0\"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:g.s(u,2,\"0\"),s:String(this.$s),ss:g.s(this.$s,2,\"0\"),SSS:g.s(this.$ms,3,\"0\"),Z:r};return n.replace(c,function(t,e){return e||l[t]||r.replace(\":\",\"\")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(t,f,h){var c,d=g.p(f),$=v(t),l=6e4*($.utcOffset()-this.utcOffset()),y=this-$,M=g.m(this,$);return M=(c={},c[o]=M/12,c[u]=M,c[a]=M/3,c[s]=(y-l)/6048e5,c[i]=(y-l)/864e5,c[r]=y/36e5,c[n]=y/6e4,c[e]=y/1e3,c)[d]||y,h?M:g.a(M)},$.daysInMonth=function(){return this.endOf(u).$D},$.$locale=function(){return M[this.$L]},$.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=D(t,e,!0);return r&&(n.$L=r),n},$.clone=function(){return g.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},d}(),p=S.prototype;return v.prototype=p,[[\"$ms\",t],[\"$s\",e],[\"$m\",n],[\"$H\",r],[\"$W\",i],[\"$M\",u],[\"$y\",o],[\"$D\",f]].forEach(function(t){p[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),v.extend=function(t,e){return t.$i||(t(e,S,v),t.$i=!0),v},v.locale=D,v.isDayjs=m,v.unix=function(t){return v(1e3*t)},v.en=M[y],v.Ls=M,v.p={},v});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","export default __webpack_public_path__ + \"img/logo-pictures.png\";","export default __webpack_public_path__ + \"img/picture-1.jpg\";","export default __webpack_public_path__ + \"img/picture-2.jpg\";","export default __webpack_public_path__ + \"img/picture-3.jpg\";","import {createElement} from \"../utils/render.js\";\n\nexport class AbstractView {\n  constructor() {\n    if (new.target === AbstractView) {\n      throw new Error(\"Can't instantiate abstract class\");\n    }\n\n    this._element = null;\n    this._callback = {};\n  }\n\n  getTemplate() {\n    throw new Error(\"Abstract method not emplemented: getTemplate\");\n  }\n\n  getElement() {\n    if (!this._element) {\n      this._element = createElement(this.getTemplate());\n    }\n\n    return this._element;\n  }\n\n  removeElement() {\n    this._element = null;\n  }\n}\n","import {AbstractView} from \"../view/abstract.js\";\n\nexport const createElement = (template) => {\n  const newElement = document.createElement('div');\n  newElement.innerHTML = template;\n\n  return newElement.firstChild;\n}\n\nexport const RenderPosition = {\n  AFTERBEGIN: `afterbegin`,\n  BEFOREEND: `beforeend`,\n}\n\nexport const render = (container, child, place) => {\n  if(container instanceof AbstractView) {\n    container = container.getElement();\n  }\n\n  if(child instanceof AbstractView) {\n    child = child.getElement();\n  }\n\n  switch (place) {\n    case RenderPosition.AFTERBEGIN:\n      container.prepend(child);\n      break;\n    case RenderPosition.BEFOREEND:\n      container.append(child);\n      break;\n  }\n};\n\nexport const remove = (component) => {\n  if (component === null) {\n    return;\n  }\n\n  if (!(component instanceof AbstractView)) {\n    throw new Error(`Can remove only components`);\n  }\n\n  component.getElement().remove();\n  component.removeElement();\n};\n\n","import {AbstractView} from \"./abstract.js\";\n\nexport class Smart extends AbstractView {\n  constructor() {\n    super();\n    this._data = {};\n  }\n\n  updateData(update, justDataUpdate) {\n    if (!update) {\n      return;\n    }\n\n    this._data = Object.assign({}, this._data, update);\n\n    if (justDataUpdate) {\n      return;\n    }\n\n    this.updateElement();\n  }\n\n  updateElement() {\n    let prevElement = this.getElement();\n    const parent = prevElement.parentElement;\n    this.removeElement();\n\n    const newElement = this.getElement();\n\n    parent.replaceChild(newElement, prevElement);\n    this.restoreHandlers();\n  }\n\n  restoreHandlers() {\n    throw new Error(`Abstract method showld have been emplemented`);\n  }\n}\n","import {Smart} from \"./smart.js\";\n\nconst BLANK_PICTURE = {\n  id: \"\",\n  src: \"\",\n  title: \"\",\n  author: \"\",\n  likes: 0,\n}\n\nconst createNewPictureTemplate = (picture) => {\n  const {src = null} = picture;\n\n  return `<section class=\"load-new-picture\">\n  <form class=\"bg-white h-full p7 rounded-lg mx-auto\">\n    <div class=\"h-full relative flex flex-col p-4 pb-3 text-gray-400 border border-gray-200 rounded-lg\">\n        <div class=\"h-full mb-3 relative flex flex-col justify-center text-gray-400 border border-gray-200 border-dashed rounded cursor-pointer\">\n            <input accept=\"*\" type=\"file\" multiple class=\"img-input absolute inset-0 z-10 w-full h-50 p-0 m-0 outline-none opacity-0 cursor-pointer\"/>\n            <!-- ПОПРАВИТЬ ПРЕВЬЮ, ЧТОБЫ РОВНО ПО РАЗМЕРУ ВЛАЗИЛО И КРУГЛЫЕ КРАЯ -->\n            ${src ? `\n                <img src=${src} class=\"object-cover w-full h-full rounded\" />\n              ` :\n              `<div class=\"flex flex-col items-center justify-center py-10 text-center\">\n                <svg class=\"w-6 h-6 mr-1 text-current-50\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n                <p class=\"m-0\">Drag your files here or click in this area.</p>\n              </div>`}\n        </div>\n        <div class=\"flex flex-col items-center\">\n          <div class=\"flex flex-row items-center w-full border rounded-3xl h-10 px-3 pb-1 mb-3\">\n            <div class=\"w-full\">\n              <input type=\"text\" class=\"picture-title border border-transparent w-full focus:outline-none text-sm h-7 flex items-center\" placeholder=\"Write your description\">\n            </div>\n          </div>\n          <div class=\"flex flex-row w-full\">\n            <button type=\"submit\" class=\"button-submit flex items-center justify-center mr-1 h-10 w-full rounded-3xl bg-gray-200 hover:bg-gray-300 text-indigo-800 text-white\"\n            ${src ? `` : `disabled`}\n            >\n              Load\n            </button>\n            <button type=\"button\" class=\"cancel-button flex items-center justify-center h-10 w-full rounded-3xl bg-red-500 hover:bg-red-600 text-indigo-800 text-white\">\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </section>`\n}\n\nexport class NewPictureView extends Smart {\n  constructor() {\n    super();\n    this._data = BLANK_PICTURE;\n\n    this._submitHandler = this._submitHandler.bind(this);\n    this._cancelClickHandler = this._cancelClickHandler.bind(this);\n    this._descriptionInputHandler = this._descriptionInputHandler.bind(this);\n    this._loadImgHandler = this._loadImgHandler.bind(this);\n\n    this._setInnerHandlers();\n  }\n\n  getTemplate() {\n    return createNewPictureTemplate(this._data);\n  }\n\n  restoreHandlers() {\n    this._setInnerHandlers();\n    this.setSubmitHandler(this._callback.submit);\n    this.setCancelClickHandler(this._callback.cancelClick);\n  }\n\n  _setInnerHandlers() {\n    this.getElement()\n      .querySelector(`.picture-title`)\n      .addEventListener(`input`, this._descriptionInputHandler);\n    this.getElement()\n      .querySelector(`.img-input`)\n      .addEventListener(`input`, this._loadImgHandler);\n  }\n\n  _descriptionInputHandler(evt) {\n    evt.preventDefault();\n    this.updateData({\n      title: evt.target.value\n    }, true);\n  }\n\n  _cancelClickHandler(evt) {\n    evt.preventDefault();\n    this._callback.cancelClick();\n  }\n\n  _submitHandler(evt) {\n    evt.preventDefault();\n    this._callback.submit(this._data);\n  }\n\n  _loadImgHandler() {\n    const fileChooser = this.getElement().querySelector(`.img-input`);\n    const file = fileChooser.files[0];\n    if (file) {\n      let reader = new FileReader();\n\n      reader.addEventListener('load', () => {\n        this.updateData({\n          src: reader.result,\n        })\n      });\n\n      reader.readAsDataURL(file);\n    }\n  }\n\n  setSubmitHandler(callback) {\n    this._callback.submit = callback;\n\n    this.getElement().querySelector('form')\n      .addEventListener('submit', this._submitHandler);\n  }\n\n  setCancelClickHandler(callback) {\n    this._callback.cancelClick = callback;\n    this.getElement().querySelector(`.cancel-button`)\n      .addEventListener(`click`, this._cancelClickHandler);\n  }\n}\n","export const UpdateType = {\n  NONE: `NONE`,\n  PATCH: `PATCH`,\n  MINOR: `MINOR`,\n  MAJOR: `MAJOR`,\n  INIT: `INIT`\n};\n\nexport const UserAction = {\n  UPDATE_PICTURE: `UPDATE_PICTURE`,\n  UPDATE_USER_FAVORITE: `UPDATE_USER_FAVORITE`,\n  UPDATE_USER_LIKE: `UPDATE_USER_LIKE`,\n  UPDATE_COMMENT: `UPDATE_COMMENT`,\n  LOAD_PICTURE: `LOAD_PICTURE`,\n  ADD_COMMENT: `ADD_COMMENT`,\n  DELETE_PICTURE: `DELETE_PICTURE`,\n  DELETE_COMMENT: `DELETE_COMMENT`,\n};\n\nexport const MenuItem = {\n  LOAD_PICTURE: `LOAD_PICTURE`,\n  PROFILE: `PROFILE`,\n  SING_OUT: `SING_OUT`,\n}\n","import {render, remove, RenderPosition} from \"../utils/render.js\";\nimport {NewPictureView} from \"../view/new-picture.js\";\nimport {UserAction, UpdateType} from \"../const.js\";\n\nexport class NewPicturePresenter {\n  constructor(picturesContainer, changeData) {\n    this._picturesContainer = picturesContainer;\n    this._changeData = changeData;\n    this._newPictureComponent = null;\n\n    this._handleFormSubmit = this._handleFormSubmit.bind(this);\n    this._handleCancelClick = this._handleCancelClick.bind(this);\n  }\n\n  init(cancelCallback) {\n    this._cancelCallback = cancelCallback;\n    if (this._newPictureComponent !== null) {\n      return;\n    }\n\n    this._newPictureComponent = new NewPictureView();\n\n    this._newPictureComponent.setSubmitHandler(this._handleFormSubmit);\n    this._newPictureComponent.setCancelClickHandler(this._handleCancelClick);\n\n    render(this._picturesContainer, this._newPictureComponent, RenderPosition.AFTERBEGIN);\n  }\n\n  destroy() {\n    if (this._cancelCallback !== null) {\n      this._cancelCallback();\n    }\n\n    if (this._newPictureComponent === null) {\n      return;\n    }\n\n    remove(this._newPictureComponent);\n    this._newPictureComponent = null;\n  }\n\n  _handleCancelClick() {\n    this.destroy();\n  }\n\n  _handleFormSubmit(picture) {\n    this._changeData(\n        UserAction.LOAD_PICTURE,\n        UpdateType.MAJOR,\n        picture\n    );\n  }\n}\n","import {Smart} from \"./smart.js\";\n\nconst createCommentsButtonTemplate = (isCommentsOpen) => {\n  return `<div class=\"flex justify-center\">\n        <button class=\"comments-btn font-medium text-sm\" type=\"button\">${isCommentsOpen ? `Hide` : `Show`} comments</button>\n      </div>`\n}\n\nexport class CommentsButtonView extends Smart {\n  constructor() {\n    super();\n    this._data = {isCommentsOpen: false};\n\n    this._commentsButtonHandler = this._commentsButtonHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createCommentsButtonTemplate(this._data.isCommentsOpen);\n  }\n\n  restoreHandlers() {\n    this.setCommentsButtonHandler(this._callback.commentsClick);\n  }\n\n  _commentsButtonHandler(evt) {\n    evt.preventDefault();\n    this._callback.commentsClick();\n    this.updateData({isCommentsOpen: !this._data.isCommentsOpen});\n  }\n\n  setCommentsButtonHandler(callback) {\n    this._callback.commentsClick = callback;\n\n    this.getElement().querySelector('.comments-btn').addEventListener('click', this._commentsButtonHandler);\n  }\n}\n","import {AbstractView} from \"./abstract.js\";\n\nconst createCommentsContainerTemplate = () => {\n  return `<div class=\"comments-section\"></div>`\n}\nexport class CommentsContainerView extends AbstractView {\n  getTemplate() {\n    return createCommentsContainerTemplate();\n  }\n}\n","import { AbstractView } from \"./abstract.js\";\n\nconst createPictureTemplate = (picture) => {\n  const {src, title, author} = picture;\n  return `<section class=\"picture\">\n  <div class=\"grid\">\n    <div class=\"w-full h-80 relative\">\n      <img src=\"${src}\" alt=\"${title}\" class=\"object-cover w-full h-full bg-gray-100 rounded-t-lg\" />\n      <div class=\"absolute bottom-0 z-10 w-full px-4 pt-40 pb-3 bg-gradient-to-t from-black\">\n        <p class=\"text-sm font-medium text-white\">${author}</p>\n        <h2 class=\"text-xl font-semibold text-white\">${title}</h2>\n      </div>\n    </div>\n    <div class=\"social-block-wrapper bg-white rounded-b-lg py-3 px-4\">\n\n    </div>\n  </div>\n</section>`\n}\n\nexport class PictureView extends AbstractView {\n  constructor(picture) {\n    super();\n    this._picture = picture;\n  }\n\n  getTemplate() {\n    return createPictureTemplate(this._picture);\n  }\n}\n","import {Smart} from \"./smart.js\";\n\nconst createSocialBlockTemplate = (picture) => {\n  const {likes, isFavorite, isLiked} = picture;\n\n  return `<div class=\"flex\">\n          <div class=\"flex items-center text-sm font-medium\">\n            <div class=\"\">\n              <span class=\"text-black\">Likes</span>\n            </div>\n            <div class=\"text-base font-normal mx-2\">·</div>\n            <div class=\"\">\n              <span class=\"text-black\">${likes}</span>\n            </div>\n          </div>\n          <label class=\"flex-none flex ml-auto items-center justify-center cursor-pointer hover:text-yellow-500\">\n            <input type=\"checkbox\" class=\"favorite appearance-none\" aria-label=\"favorite\" ${isFavorite ? `checked`: ``}>\n            <svg class=\"flex-shrink-0 h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"\n              viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n                d=\"M16 4v12l-4-2-4 2V4M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n            </svg>\n          </label>\n          <label class=\"flex-none flex items-center justify-center cursor-pointer hover:text-red-500 ml-1\">\n            <input class=\"like appearance-none\" type=\"checkbox\" aria-label=\"like\" ${isLiked ? `checked`: ``}>\n            <svg class=\"flex-shrink-0 h-5 w-5\" width=\"20\" height=\"20\" fill=\"currentColor\">\n              <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                d=\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\" />\n            </svg>\n          </label>\n        </div>`\n}\n\nexport class SocialBlockView extends Smart {\n  constructor(picture) {\n    super();\n    this._data = picture;\n\n    this._likeClickHandler = this._likeClickHandler.bind(this);\n    this._favoriteClickHandler = this._favoriteClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createSocialBlockTemplate(this._data);\n  }\n\n  restoreHandlers() {\n    this.setLikeClickHandler(this._callback.likeClick);\n    this.setFavoriteClickHandler(this._callback.favoriteClick);\n  }\n\n  _likeClickHandler(evt) {\n    const sign = evt.target.checked ? 1 : -1;\n    this.updateData({\n      likes: this._data.likes + sign,\n      isLiked: !this._data.isLiked,\n    });\n\n    this._callback.likeClick(this._data);\n  }\n\n  _favoriteClickHandler() {\n    this.updateData({\n      isFavorite: !this._data.isFavorite,\n    });\n\n    this._callback.favoriteClick(this._data);\n  }\n\n  setLikeClickHandler(callback) {\n    this._callback.likeClick = callback;\n\n    this.getElement().querySelector('.like')\n      .addEventListener('click', this._likeClickHandler);\n  }\n\n  setFavoriteClickHandler(callback) {\n    this._callback.favoriteClick = callback;\n\n    this.getElement().querySelector('.favorite').addEventListener('click', this._favoriteClickHandler);\n  }\n}\n","import {Smart} from \"./smart.js\";\nimport {UserAction, UpdateType} from \"../const.js\";\n\nconst BLANK_COMMENT = {\n  author: \"\",\n  avatar: \"\",\n  text: \"\",\n  time: \"\",\n  likeCount: 0,\n}\n\nconst createCommentsSection = () => {\n  return `<div>\n    <div class=\"comments-list-wrapper\">\n      <div class=\"comments-list pt-4\">\n      </div>\n    </div>\n\n    <form class=\"flex flex-row items-center\">\n      <div class=\"flex flex-row items-center w-full border rounded-3xl h-10 px-3 pb-1\">\n        <div class=\"w-full\">\n          <input type=\"text\" class=\"comment-input border border-transparent w-full focus:outline-none text-sm h-7 flex items-center\" placeholder=\"Write your comment....\">\n        </div>\n      </div>\n      <div class=\"ml-1\">\n        <button class=\"flex items-center justify-center h-10 w-10 rounded-full bg-gray-200 hover:bg-gray-300 text-indigo-800 text-white\" type=\"submit\">\n          <svg class=\"w-5 h-5 transform rotate-90 -mr-px\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"></path>\n          </svg>\n        </button>\n      </div>\n    </form>\n  </div>`\n}\n\nexport class CommentsSectionView extends Smart {\n  constructor() {\n    super();\n    this._data = BLANK_COMMENT;\n\n    this._imputCommentHandler = this._imputCommentHandler.bind(this);\n    this._submitHandler = this._submitHandler.bind(this);\n    this._setInnerHandlers();\n  }\n\n  getTemplate() {\n    return createCommentsSection();\n  }\n\n  restoreHandlers() {\n    this._setInnerHandlers();\n    this.setSubmitHandler(this._callback.submit)\n  }\n\n  _setInnerHandlers() {\n    this.getElement()\n      .querySelector(`.comment-input`)\n      .addEventListener(`input`, this._imputCommentHandler);\n  }\n\n  _imputCommentHandler(evt) {\n    evt.preventDefault();\n    this.updateData({\n      text: evt.target.value,\n    }, true)\n  }\n\n  _submitHandler(evt) {\n    evt.preventDefault();\n    if (!this._data.text) {\n      return;\n    }\n\n    this._callback.submit(\n      UserAction.ADD_COMMENT,\n      UpdateType.MAJOR,\n      this._data);\n  }\n\n  setSubmitHandler(callback) {\n    this._callback.submit = callback;\n\n    this.getElement().querySelector('form')\n      .addEventListener('submit', this._submitHandler);\n  }\n}\n","import {AbstractView} from \"./abstract.js\";\n\nconst createNoCommentsTemplate = () => {\n  return `<div class=\"flex items-center justify-center text-xs mt-2\">\n    <div class=\"bg-gray-100 w-auto rounded-xl p-2\">\n      No comments yet. You will be first!\n    </div>\n  </div>`\n}\nexport class NoCommentsView extends AbstractView {\n  getTemplate() {\n    return createNoCommentsTemplate();\n  }\n}\n","import {AbstractView} from \"./abstract.js\";\n\nconst createShowMoreComments = () => {\n  return `<div class=\"flex justify-center mb-3\">\n      <button class=\"show-more-comments font-medium text-sm\" type=\"button\">Show more comments</button>\n    </div>`\n}\n\nexport class ShowMoreCommentsView extends AbstractView {\n  constructor() {\n    super();\n\n    this._clickHandler = this._clickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createShowMoreComments();\n  }\n\n  _clickHandler(evt) {\n    evt.preventDefault();\n    this._callback.click();\n  }\n\n  setClickHandler(callback) {\n    this._callback.click = callback;\n    this.getElement().querySelector('.show-more-comments')\n      .addEventListener('click', this._clickHandler);\n  }\n}\n","export const getRandomNumber = (a, b) => {\n  const lower = Math.ceil(Math.min(a, b));\n  const upper = Math.floor(Math.max(a, b));\n\n  return Math.floor(lower + Math.random() * (upper - lower + 1));\n}\n","import {getRandomNumber} from \"./utils.js\";\n\nconst avatars = [\"https://images.unsplash.com/photo-1616171812687-1028c744649d?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80\", \"https://images.unsplash.com/photo-1616344906751-b94c54d3a392?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=334&q=80\", \"https://images.unsplash.com/photo-1507965613665-5fbb4cbb8399?ixid=MXwxMjA3fDB8MHx0b3BpYy1mZWVkfDQzfHRvd0paRnNrcEdnfHxlbnwwfHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\"];\n\nconst authors = [\n  \"Mike Shinoda\",\n  \"Lesli Jackson\",\n  \"Ivan Demarin\",\n]\n\nconst comments = [\n  \"I think this is the best I’ve seen till now\",\n  \"Just when I couldn’t love you more.\", \"You posted this pic and my jaw dropped to the floor.\",\n  \"Surely you are the most beautiful woman alive, the most that I’ve seen\",\n  \"The word pretty is worthless without you\",\n  \"Flawless outstanding eccentric lovely beauty\",\n  \"The stars, the moon, and the sun are minor to me since you sparkle brighter than all of them\", \"Surely you would have been arrested if looking immensely beautiful was a crime.\"\n]\n\nconst generateComment = () => {\n  return {\n    id: Math.floor(Math.random() * 1000000),\n    avatar: avatars[getRandomNumber(0, avatars.length - 1)],\n    author: authors[getRandomNumber(0, authors.length - 1)],\n    text: comments[getRandomNumber(0, authors.length - 1)],\n    time: new Date(),\n    likeCount: Math.floor(Math.random() * 100),\n  }\n}\n\nconst comments1 = new Array(5).fill(\"\").map((item) => item = generateComment());\nconst comments2 = new Array(7).fill(\"\").map((item) => item = generateComment());\n\nexport const allComments = [{\n  pictureId: 101,\n  comments: comments1,\n}, {\n  pictureId: 100,\n  comments: comments2,\n}]\n","import dayjs from \"dayjs\";\nimport { Smart } from \"./smart\";\nimport {UserAction, UpdateType} from \"../const.js\";\n\nconst createComment = (comment) => {\n  const {avatar, author, text, time, likeCount} = comment;\n  const isLikesShowing = !!likeCount;\n\n  return `<div class=\"flex items-center space-x-2 mb-3\">\n    <div class=\"group relative flex flex-shrink-0 self-start cursor-pointer\">\n      <img class=\"h-8 w-8 object-fill rounded-full\"\n        src=${avatar}\n        alt=${author}>\n    </div>\n    <div class=\"flex items-center justify-center space-x-2\">\n      <div class=\"block\">\n        <div class=\"bg-gray-100 w-auto rounded-xl px-2 pb-2\">\n          <div class=\"font-medium\">\n            <a href=\"#\" class=\"hover:underline text-sm\">\n              <small>${author}</small>\n            </a>\n          </div>\n          <div class=\"text-xs\">\n            ${text}\n          </div>\n        </div>\n        <div class=\"flex justify-start items-center text-xs w-full\">\n          <div class=\"font-semibold text-gray-700 px-2 flex items-center justify-center space-x-1\">\n            <div class=\"flex items-center text-xs\">\n            ${isLikesShowing ? `\n              ${likeCount}\n              <svg class=\"flex-shrink-0 h-3 w-3\" width=\"5\" height=\"5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                d=\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\" />\n              </svg>` : ``}\n            </div>\n            <label class=\"cursor-pointer hover:underline\">\n              <input type=\"checkbox\" href=\"#\" class=\"comment-like hidden group\">\n              <small>Like</small>\n            </label>\n            <small class=\"self-center\">.</small>\n            <a href=\"#\" class=\"hover:underline\">\n              <small>Delete</small>\n            </a>\n            <small class=\"self-center\">.</small>\n            <small>${dayjs(time).format('DD.MM.YYYY')}</small>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>`\n}\n\nexport class CommentView extends Smart {\n  constructor(comment) {\n    super()\n    this._data = comment;\n\n    this._likeClickHandler = this._likeClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createComment(this._data);\n  }\n\n  restoreHandlers() {\n    this.setLikeClickHandler(this._callback.likeClick);\n  }\n\n  _likeClickHandler(evt) {\n    const sign = evt.target.checked ? 1 : -1;\n    this.updateData({\n      likeCount: this._data.likeCount + sign,\n      isLiked: !this._data.isLiked,\n    });\n\n    this._callback.likeClick(\n      UserAction.UPDATE_COMMENT,\n      UpdateType.NONE,\n      this._data\n      );\n  }\n\n  setLikeClickHandler(callback) {\n    this._callback.likeClick = callback;\n\n    this.getElement().querySelector('.comment-like')\n      .addEventListener('click', this._likeClickHandler);\n  }\n}\n\n\n////// ЛАЙК ПО КОММЕНТУ ДОЛЖЕН ДЕЛАТЬ КОММЕНТ ЖИРНЫМ И ДОЛЖЕН ДОБАВЛЯТЬ К ДАТЕ ИЗЛАЙКЕД.....\n///// ТАК ЖЕ ГДЕ ТО НУЖНО СОЕДИНЯТЬ ДАННЫЕ - ПЕРЕД РЕНДЕРОМ КО ВСЕМ КОММЕНТАМ ДОБАВИТЬ isLIKED ЕСЛИ ПОЛЬЗОВАТЕЛЬ ИХ ЛАЙКАЛ И ОНИ ЕСТЬ У НЕГО В ПРОФИЛЕ....\n///// ПРИ ЛАЙКЕ ДОБАВЛЯТЬ ПОЛЬЗОВАТЕЛЮ В ПРОФИЛЬ ИХ\n","import {CommentsSectionView} from \"../view/comments.js\";\nimport {NoCommentsView} from \"../view/no-comments.js\";\nimport {ShowMoreCommentsView} from \"../view/show-more-comments.js\";\nimport {render, remove, RenderPosition} from \"../utils/render.js\";\nimport {UpdateType, UserAction} from \"../const.js\";\nimport {allComments} from \"../mock/comment.js\";\nimport {CommentView} from \"../view/comment.js\";\n\nconst COMMENTS_COUNT_PER_STEP = 3;\n\nexport class CommentsSectionPresenter {\n  constructor(commentsSectionContainer, commentsModel, userModel) {\n    this._commentsSectionContainer = commentsSectionContainer;\n    this._commentsModel = commentsModel;\n    this._userModel = userModel;\n    this._renderedCommentsCount = COMMENTS_COUNT_PER_STEP;\n    this._commentComponent = {};\n\n    this._noCommentsComponent = null;\n    this._commentsSectionComponent = null;\n    this._showMoreCommentsComponent = new ShowMoreCommentsView();\n\n    this._handleShowMoreCommentsClick = this._handleShowMoreCommentsClick.bind(this);\n    this._handleCommentsViewAction = this._handleCommentsViewAction.bind(this);\n    this._handleCommentsModelEvent = this._handleCommentsModelEvent.bind(this);\n\n    this._commentsModel.addObserver(this._handleCommentsModelEvent);\n  }\n\n  init(picture) {\n    this._picture = picture;\n    this._loadPictureComments(this._picture);\n  }\n\n  destroy() {\n    if(!this._commentsSectionComponent) {\n      return;\n    }\n\n    Object.values(this._commentComponent)\n      .forEach((component) => remove(component));\n    remove(this._noCommentsComponent);\n    remove(this._showMoreCommentsComponent);\n    remove(this._commentsSectionComponent);\n    this._commentsModel.removeObserver(this._handleCommentsModelEvent);\n    this._commentComponent = {};\n  }\n\n  _cleanComments() {\n    Object.values(this._commentComponent)\n      .forEach((component) => remove(component));\n\n    remove(this._commentsSectionComponent);\n\n    if (this._noCommentsComponent !== null) {\n      remove(this._noCommentsComponent);\n    }\n  }\n\n  _loadPictureComments(currentPicture) {\n    console.log('load');\n    this._setPictureComments();\n  }\n\n  _setPictureComments() {\n    let currentPictureComments = allComments\n      .filter((comments) => comments.pictureId === this._picture.id);\n\n    if (currentPictureComments.length) {\n      currentPictureComments = currentPictureComments[0].comments;\n    }\n    this._commentsModel.setComments(UpdateType.INIT, currentPictureComments);\n  }\n\n  _handleCommentsViewAction(actionType, updateType, update) {\n    switch(actionType) {\n      case UserAction.UPDATE_COMMENT:\n        this._commentsModel.updateComment(updateType, update);\n        break;\n\n      case UserAction.ADD_COMMENT:\n        update = CommentsSectionPresenter.addUserDataToComment(this._userModel.getUser(), update);\n        this._commentsModel.addComment(updateType, update);\n        break;\n    }\n  }\n\n  _handleCommentsModelEvent(updateType, data) {\n    switch (updateType) {\n      case UpdateType.PATCH:\n        this._picturePresenter[data.id].init(data);\n        break;\n      case UpdateType.MAJOR:\n        this._cleanComments();\n        this._renderCommentsSection();\n        break;\n      case UpdateType.INIT:\n        this._renderCommentsSection();\n        break;\n    }\n  }\n\n  _handleShowMoreCommentsClick() {\n    const commentsCount = this._comments.length;\n    const newRenderedCommentsCount = Math.min(commentsCount, this._renderedCommentsCount + COMMENTS_COUNT_PER_STEP);\n    const comments = this._comments.slice(this._renderedCommentsCount, newRenderedCommentsCount);\n\n    this._renderComments(comments);\n    this._renderedCommentsCount = newRenderedCommentsCount;\n\n    if (this._renderedCommentsCount >= commentsCount) {\n      remove(this._showMoreCommentsComponent);\n    }\n  }\n\n  _renderComment(comment) {\n    const commentComponent = new CommentView(comment);\n    commentComponent.setLikeClickHandler(this._handleCommentsViewAction);\n    const commentsList = this._commentsSectionContainer.querySelector('.comments-list');\n    render(commentsList, commentComponent, RenderPosition.BEFOREEND);\n\n    this._commentComponent[comment.id] = commentComponent;\n  }\n\n  _renderComments(comments) {\n    comments.forEach((comment) => this._renderComment(comment))\n  }\n\n  _renderShowMoreCommentsButton() {\n    const commentsList = this._commentsSectionContainer.querySelector('.comments-list');\n    const showMorebuttonContainer = commentsList.parentNode;\n\n    this._showMoreCommentsComponent.setClickHandler(this._handleShowMoreCommentsClick);\n\n    render(showMorebuttonContainer, this._showMoreCommentsComponent, RenderPosition.BEFOREEND);\n  }\n\n  _renderNoComments() {\n    render(this._commentsSectionContainer, this._noCommentsComponent, RenderPosition.AFTERBEGIN);\n  }\n\n  _renderCommentsSection() {\n    this._commentsSectionComponent = new CommentsSectionView();\n    this._commentsSectionComponent.setSubmitHandler(this._handleCommentsViewAction);\n    render(this._commentsSectionContainer, this._commentsSectionComponent, RenderPosition.BEFOREEND);\n\n    this._comments = this._commentsModel.getComments();\n    const commentsCount = this._comments.length;\n\n    if(!commentsCount) {\n      this._noCommentsComponent = new NoCommentsView();\n      this._renderNoComments();\n    }\n\n    this._renderComments(this._comments.slice(0, Math.min(commentsCount, this._renderedCommentsCount)));\n\n    if (commentsCount > this._renderedCommentsCount) {\n      this._renderShowMoreCommentsButton();\n    }\n  }\n  static parseUserPicturesToBoardData(user, comments) {\n    return comments.map((comment) => {\n      return Object.assign({}, comment,\n       {\n        isLiked: user.liked.some((item) => item === comment.id),\n       })\n    })\n  }\n\n  static parseBoardDataToServerPictures(update) {\n    const adaptedPicture = Object.assign({}, update);\n\n    delete adaptedPicture.isLiked;\n    delete adaptedPicture.isFavorite;\n\n    return adaptedPicture;\n  }\n  static addUserDataToComment(user, comment) {\n    return Object.assign({}, comment, {\n      author: user.name,\n      avatar: user.avatar,\n      time: new Date(),\n    })\n  }\n}\n","export class Observer {\n  constructor() {\n    this._observers = [];\n  }\n\n  addObserver(observer) {\n    this._observers.push(observer);\n  }\n\n  removeObserver(observer) {\n    this._observers = this._observers\n      .filter((existedObserver) => existedObserver !== observer);\n  }\n\n  _notify(event, payload) {\n    this._observers.forEach((observer) => observer(event, payload));\n  }\n}\n","import {Observer} from \"../utils/observer.js\";\n\nexport class CommentsModel extends Observer {\n  constructor() {\n    super();\n    this._comments = [];\n  }\n\n  setComments(updateType, comments) {\n    this._comments = comments.slice();\n\n    this._notify(updateType)\n  }\n\n  getComments() {\n    return this._comments;\n  }\n\n  updateComment(updateType, update) {\n    const index = this._comments.findIndex((comment) => comment.id === update.id);\n\n    if (index === -1) {\n      throw new Error(\"Can't update unexisting comment\")\n    }\n\n    this._comments = [\n      ...this._comments.slice(0, index),\n      update,\n      ...this._comments.slice(index + 1)\n    ]\n\n    this._notify(updateType, update);\n  }\n\n  addComment(updateType, update) {\n    this._comments = [\n      update,\n      ...this._comments\n    ];\n\n    this._notify(updateType, update);\n  }\n}\n","import {CommentsButtonView} from \"../view/show-comments.js\";\nimport {CommentsContainerView} from \"../view/comments-container.js\";\nimport {PictureView} from \"../view/picture.js\";\nimport {SocialBlockView} from \"../view/social-block.js\";\nimport {render, remove, RenderPosition} from \"../utils/render.js\";\nimport {UpdateType, UserAction} from \"../const.js\";\nimport {CommentsSectionPresenter} from \"./comments.js\";\nimport {CommentsModel} from \"../model/comments.js\";\n\nexport class PicturePresenter {\n  constructor(picturesContainer, changeMode, changePicture, userModel) {\n    this._picturesContainer = picturesContainer;\n    this._changeMode = changeMode;\n    this._changePicture = changePicture;\n    this._userModel = userModel;\n\n    this._isCommentsOpen = false;\n\n    this._commentsButtonComponent = null;\n    this._pictureComponent = null;\n    this._socialBlockComponent = null;\n    this._socialBlockContainer = null;\n    this._commentsContainer = null;\n\n    this._handleCommentsClick = this._handleCommentsClick.bind(this);\n    this._handleLikeClick = this._handleLikeClick.bind(this);\n    this._handleFavoriteClick = this._handleFavoriteClick.bind(this);\n  }\n\n  init(picture) {\n    this._picture = picture;\n\n    this._pictureComponent = new PictureView(this._picture);\n    this._commentsButtonComponent = new CommentsButtonView();\n    this._socialBlockComponent = new SocialBlockView(this._picture);\n    this._commentsContainerComponent = new CommentsContainerView();\n    this._commentsModel = new CommentsModel();\n\n    this._socialBlockContainer = this._pictureComponent.getElement().querySelector('.social-block-wrapper');\n\n    render(this._picturesContainer, this._pictureComponent, RenderPosition.BEFOREEND);\n    render(this._socialBlockContainer, this._socialBlockComponent, RenderPosition.BEFOREEND);\n    render(this._socialBlockContainer, this._commentsButtonComponent, RenderPosition.BEFOREEND);\n    render(this._socialBlockContainer, this._commentsContainerComponent, RenderPosition.BEFOREEND)\n\n    this._commentsButtonComponent.setCommentsButtonHandler(this._handleCommentsClick);\n    this._socialBlockComponent.setLikeClickHandler(this._handleLikeClick);\n    this._socialBlockComponent.setFavoriteClickHandler(this._handleFavoriteClick);\n  }\n\n  destroy() {\n    this._clearCommentsSection();\n    remove(this._pictureComponent);\n    remove(this._commentsButtonComponent);\n    remove(this._socialBlockComponent);\n    remove(this._commentsContainerComponent);\n  }\n\n  resetView() {\n    this._commentsButtonComponent.updateData({isCommentsOpen: false});\n    this._isCommentsOpen = false;\n    this._clearCommentsSection();\n  }\n\n  _handleCommentsClick() {\n    if (this._isCommentsOpen) {\n      this._clearCommentsSection();\n    } else {\n      this._changeMode();\n      this._renderCommentsSection();\n    }\n\n    this._isCommentsOpen = !this._isCommentsOpen;\n  }\n\n  _handleLikeClick(update) {\n    this._changePicture(\n        UserAction.UPDATE_PICTURE,\n        UpdateType.NONE,\n        update\n    );\n    this._changePicture(\n      UserAction.UPDATE_USER_LIKE,\n      UpdateType.NONE,\n      update\n    );\n  }\n\n  _handleFavoriteClick(update) {\n    this._changePicture(\n      UserAction.UPDATE_USER_FAVORITE,\n      UpdateType.NONE,\n      update\n    );\n  }\n\n  _clearCommentsSection() {\n    if(!this._commentsSectionPresenter) {\n      return;\n    }\n    this._commentsSectionPresenter.destroy();\n  }\n\n  _renderCommentsSection() {\n    const commentsContainer = this._commentsContainerComponent.getElement();\n    this._commentsSectionPresenter = new CommentsSectionPresenter(commentsContainer, this._commentsModel, this._userModel);\n    this._commentsSectionPresenter.init(this._picture);\n  }\n}\n","import {NewPicturePresenter} from \"./new-picture.js\";\nimport {PicturePresenter} from \"./picture.js\";\nimport {UserAction, UpdateType} from \"../const.js\";\n\nexport class BoardPresenter {\n  constructor(boardContainer, pictureModel, userModel) {\n    this._boardContainer = boardContainer;\n    this._picturePresenter = {};\n    this._pictureModel = pictureModel;\n    this._userModel = userModel;\n\n    this._handleModeChange = this._handleModeChange.bind(this);\n    this._handleViewAction = this._handleViewAction.bind(this);\n    this._handleModelEvent = this._handleModelEvent.bind(this);\n\n    this._pictureModel.addObserver(this._handleModelEvent);\n    this._newPicturePresenter = new NewPicturePresenter(this._boardContainer, this._handleViewAction);\n  }\n\n  init() {\n    this._renderBoard();\n  }\n\n  createPicture(callback) {\n    this._newPicturePresenter.init(callback);\n    this._handleModeChange();\n  }\n\n  _handleModeChange() {\n    Object\n      .values(this._picturePresenter)\n      .forEach((presenter) => presenter.resetView());\n  }\n\n  _renderPicture(picture) {\n    const picturePresenter = new PicturePresenter(this._boardContainer, this._handleModeChange, this._handleViewAction, this._userModel);\n\n    picturePresenter.init(picture);\n    this._picturePresenter[picture.id] = picturePresenter;\n  }\n\n  _renderPictures(pictures) {\n    pictures.forEach((picture) => this._renderPicture(picture));\n  }\n\n  _renderBoard() {\n    const pictures = this._pictureModel.getPictures();\n    const user = this._userModel.getUser();\n\n    const boardPictures = BoardPresenter\n      .parseUserPicturesToBoardData(user, pictures);\n\n    this._renderPictures(boardPictures);\n  }\n\n  _clearBoard() {\n    this._newPicturePresenter.destroy();\n\n    Object.values(this._picturePresenter)\n      .forEach((presenter) => presenter.destroy());\n\n    this._picturePresenter = {};\n  }\n\n  _handleViewAction(actionType, updateType, update) {\n    switch(actionType) {\n      case UserAction.UPDATE_PICTURE:\n        this._pictureModel.updatePicture(updateType,\n          BoardPresenter.parseBoardDataToServerPictures(update));\n        break;\n\n      case UserAction.UPDATE_USER_FAVORITE:\n        this._userModel.updateFavorites(updateType, update);\n        break;\n\n      case UserAction.UPDATE_USER_LIKE:\n        this._userModel.updateLiked(updateType, update);\n        break;\n\n      case UserAction.LOAD_PICTURE:\n        const currentUser = this._userModel.getUser();\n        update = BoardPresenter.adaptNewPictureToBoard(currentUser, update);\n        this._pictureModel.loadPicture(updateType, update);\n        break;\n    }\n  }\n\n  _handleModelEvent(updateType, data) {\n    switch (updateType) {\n      case UpdateType.PATCH:\n        this._picturePresenter[data.id].init(data);\n        break;\n      case UpdateType.MAJOR:\n        this._clearBoard();\n        this._renderBoard();\n        break;\n    }\n  }\n\n  static parseUserPicturesToBoardData(user, pictures) {\n    return pictures.map((picture) => {\n      return Object.assign({}, picture,\n       {\n        isLiked: user.liked.some((item) => item === picture.id),\n        isFavorite: user.favorites.some((item) => item === picture.id),\n       })\n    })\n  }\n\n  static parseBoardDataToServerPictures(update) {\n    const adaptedPicture = Object.assign({}, update);\n\n    delete adaptedPicture.isLiked;\n    delete adaptedPicture.isFavorite;\n\n    return adaptedPicture;\n  }\n\n  static adaptNewPictureToBoard(user, newPicture) {\n    return Object.assign({}, newPicture, {\n      id: Math.floor(Math.random() * 100000),\n      author: user.name,\n    })\n  }\n}\n","import {getRandomNumber} from \"./utils.js\";\n\nconst picturesSrcs = [\n  \"./img/picture-1.jpg\",\n  \"./img/picture-2.jpg\",\n  \"./img/picture-3.jpg\"]\n\nconst picturesTitles = [\n  \"Lamps in Doha\",\n  \"City skyline\",\n  \"My first try at photo, best picture ever\",\n]\n\nconst authors = [\n  \"Mike Shinoda\",\n  \"Lesli Jackson\",\n  \"Ivan Demarin\",\n]\n\nexport const createPictureMock = () => {\n  return {\n    id: Math.floor(Math.random() * 1000000),\n    src: picturesSrcs[getRandomNumber(0, picturesSrcs.length - 1)],\n    title: picturesTitles[getRandomNumber(0, picturesTitles.length - 1)],\n    author: authors[getRandomNumber(0, authors.length - 1)],\n    likes: getRandomNumber(0, 8000),\n  }\n}\n\nexport const readyPictures = [{\n  id: 100,\n  src: \"./img/picture-1.jpg\",\n  title: \"My favorite picture\",\n  author: \"James\",\n  likes: 0,\n}, {\n  id: 101,\n  src: \"./img/picture-2.jpg\",\n  title: \"My liked picture\",\n  author: \"Joseph\",\n  likes: 1,\n}]\n","import {Observer} from \"../utils/observer.js\";\n\nexport class PicturesModel extends Observer {\n  constructor() {\n    super();\n    this._pictures = [];\n  }\n\n  setPictures(updateType, pictures) {\n    this._pictures = pictures.slice();\n\n    this._notify(updateType);\n  }\n\n  getPictures() {\n    return this._pictures;\n  }\n\n  updatePicture(updateType, update) {\n    const index = this._pictures.findIndex((picture) => picture.id === update.id);\n\n    if (index === -1) {\n      throw new Error(\"Can't update unexisting picture\")\n    }\n\n    this._pictures = [\n      ...this._pictures.slice(0, index),\n      update,\n      ...this._pictures.slice(index + 1)\n    ]\n\n    this._notify(updateType, update);\n  }\n\n  loadPicture(updateType, update) {\n    this._pictures = [\n      update,\n      ...this._pictures\n    ];\n\n    this._notify(updateType, update);\n  }\n}\n","import {Observer} from \"../utils/observer.js\";\n\nexport class UserModel extends Observer {\n  constructor() {\n    super();\n    this._user = null;\n  }\n\n  init(user) {\n    this._user = user;\n  }\n\n  getUser() {\n    return this._user;\n  }\n\n  getFavorites() {\n    return this._user.favorites;\n  }\n\n  getLiked() {\n    return this._user.liked;\n  }\n\n  _update(userItemsID, newItemID) {\n    const index = userItemsID.findIndex((item) => item === newItemID);\n\n    if (index === -1) {\n      return userItemsID = [...userItemsID, newItemID];\n    }\n\n    return userItemsID = [\n      ...userItemsID.slice(0, index),\n      ...userItemsID.slice(index + 1),\n    ]\n  }\n\n  updateFavorites(updateType, update) {\n    this._user.favorites = this._update(this._user.favorites, update.id);\n\n    this._notify(updateType, update);\n  }\n\n  updateLiked(updateType, update) {\n    this._user.liked = this._update(this._user.liked, update.id);\n\n    this._notify(updateType, update);\n  }\n}\n","import {Smart} from \"./smart.js\";\nimport {MenuItem} from \"../const.js\";\n\nconst createSiteHeaderTemplate = (user) => {\n  const {avatar, name} = user;\n\n  return `<nav class=\"bg-gray-800\">\n    <div class=\"max-w-7xl mx-auto px-2 sm:px-6 lg:px-8\">\n      <div class=\"relative flex items-center justify-between h-16\">\n        <div class=\"flex justify-start\">\n          <div class=\"flex-shrink-0 flex items-center\">\n            <img class=\"block h-8 w-auto\" src=\"./img/logo-pictures.png\" alt=\"photos\">\n            <p class=\"hidden ml-2 sm:block w-auto text-sm font-medium text-white font-serif\">Share your pictures - share your\n              mood!</p>\n          </div>\n        </div>\n        <button class=\"load-picture text-white  sm:ml-auto px-3 w-auto h-10 bg-pink-500 rounded-full hover:bg-pink-600 active:shadow-lg mouse shadow transition ease-in duration-200 focus:outline-none\">\n          <svg viewBox=\"0 0 20 20\" enable-background=\"new 0 0 20 20\" class=\"w-6 h-6 inline-block\">\n            <path fill=\"#FFFFFF\" d=\"M16,10c0,0.553-0.048,1-0.601,1H11v4.399C11,15.951,10.553,16,10,16c-0.553,0-1-0.049-1-0.601V11H4.601 C4.049,11,4,10.553,4,10c0-0.553,0.049-1,0.601-1H9V4.601C9,4.048,9.447,4,10,4c0.553,0,1,0.048,1,0.601V9h4.399 C15.952,9,16,9.447,16,10z\"></path>\n          </svg>\n          <span class=\"text-sm\">Load picture</span>\n        </button>\n  <!-------------- Profile dropdown -------------->\n        <div class=\"inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0\">\n          <div class=\"relative\">\n            <div>\n              <button type=\"button\"\n                class=\"user-menu__button bg-gray-800 flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white\"\n                id=\"user-menu\" aria-expanded=\"true\" aria-haspopup=\"true\">\n                <span class=\"sr-only\">Open user menu</span>\n                <img class=\"h-10 w-10 rounded-full\"\n                  src=${avatar}\n                  alt=\"User ${name} avatar\">\n              </button>\n            </div>\n            <div\n              class=\"user-menu__list origin-top-right z-50 absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\"\n              role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"user-menu\" hidden=\"true\">\n              <a href=\"#\" class=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\" role=\"menuitem\"\n              value=${MenuItem.PROFILE}\n              >Your Profile</a>\n              <a href=\"#\" class=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\" role=\"menuitem\"\n              value=${MenuItem.SING_OUT}\n              >Sign out</a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </nav>`\n}\n\nexport class SiteHeaderView extends Smart {\n  constructor(user) {\n    super();\n    this._user = user;\n\n    this._userClickHandler();\n    this._loadPictureClickHandler = this._loadPictureClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createSiteHeaderTemplate(this._user);\n  }\n\n  _userClickHandler() {\n    const menu = this.getElement().querySelector('.user-menu__list');\n\n    this.getElement().querySelector('.user-menu__button')\n      .addEventListener('click', () => {\n        menu.hidden = !menu.hidden;\n      });\n  }\n\n  _loadPictureClickHandler(evt) {\n    evt.preventDefault();\n    this.getElement().querySelector('.load-picture').disabled = true;\n    this._callback.loadPictureClick(MenuItem.LOAD_PICTURE);\n  }\n\n  setLoadPictureClickHandler(callback) {\n    this._callback.loadPictureClick = callback;\n\n    this.getElement().querySelector('.load-picture')\n      .addEventListener('click', this._loadPictureClickHandler)\n  }\n}\n","import \"tailwindcss/tailwind.css\";\nimport \"./img/logo-pictures.png\";\nimport \"./img/picture-1.jpg\";\nimport \"./img/picture-2.jpg\";\nimport \"./img/picture-3.jpg\";\nimport \"./style.css\";\nimport {BoardPresenter} from \"./presenter/board.js\";\nimport {render, RenderPosition} from \"./utils/render.js\";\nimport {createPictureMock, readyPictures} from \"./mock/picture.js\";\nimport {userData} from \"./mock/user.js\";\nimport {allComments} from \"./mock/comment.js\";\nimport {PicturesModel} from \"./model/pictures.js\";\nimport {UpdateType, MenuItem} from \"./const.js\";\nimport {UserModel} from \"./model/user.js\";\nimport {SiteHeaderView} from \"./view/site-header\";\n\n// MOCKS ///\nlet pictures = new Array(15).fill(\"\").map((item) => item = createPictureMock());\npictures = readyPictures.concat(pictures);\n\n// RENDER PICTURES BOARD //\nconst userModel = new UserModel();\nconst picturesModel = new PicturesModel();\npicturesModel.setPictures(UpdateType.INIT, pictures);\nuserModel.init(userData);\nconst siteHeaderView = new SiteHeaderView(userModel.getUser());\n\nconst handleNewTaskClose = () => {\n  siteHeaderView.getElement().querySelector('.load-picture').disabled = false;\n};\n\nconst handleSiteHeaderClick = (menuItem) => {\n  switch (menuItem) {\n    case MenuItem.LOAD_PICTURE:\n      boardPresenter.createPicture(handleNewTaskClose);\n      break;\n  }\n};\n\nconst headerContainer = document.querySelector('.header');\nconst picturesListContainer = document.querySelector('.pictures-list');\n\n\nsiteHeaderView.setLoadPictureClickHandler(handleSiteHeaderClick);\n\nconst boardPresenter = new BoardPresenter(picturesListContainer, picturesModel, userModel);\n\nrender(headerContainer, siteHeaderView, RenderPosition.BEFOREEND);\nboardPresenter.init();\n\n\n","export const userData = {\n  id: 352789,\n  avatar: \"https://images.unsplash.com/photo-1507965613665-5fbb4cbb8399?ixid=MXwxMjA3fDB8MHx0b3BpYy1mZWVkfDQzfHRvd0paRnNrcEdnfHxlbnwwfHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",\n  name: \"Alex\",\n  favorites: [100],\n  liked: [101]\n}\n///Структура данных - pictures: [{liked:[]}, {favorite: []}] или просто favoritePic: [], likedPic: [], likedComments: []\n"],"sourceRoot":""}